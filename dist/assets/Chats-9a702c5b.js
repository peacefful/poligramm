import{k as H,s as D,d as O,j as q,l as G,m as J,r as u,n as k,q as P,x as W,u as s,c as m,a as l,t as U,b as p,y as M,T as K,I,z as Q,M as X,F as Y,A as Z,C as ee,D as te,o as r,E as se,G as oe,H as ne,J as ae,p as le,i as ie,_ as de}from"./index-2fd4a5c6.js";const ce="/assets/burger-menu-943cd140.svg",ue="/assets/chat-810ec4a5.svg",re="/assets/trash-00570b08.svg";let _;const me=new Uint8Array(16);function pe(){if(!_&&(_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(me)}const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function _e(e,t=0){return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}const he=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),f={randomUUID:he};function ge(e,t,c){if(f.randomUUID&&!t&&!e)return f.randomUUID();e=e||{};const a=e.random||(e.rng||pe)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t){c=c||0;for(let i=0;i<16;++i)t[c+i]=a[i];return t}return _e(a)}const g="https://srv.poligramm.kz/api/chats",v=H.create({baseURL:g});v.defaults.headers.common.Authorization=D.getData("token");const ve=async e=>{try{e.trim()&&(await v.post(g,{roomName:e,uuid:ge(),userId:Number(D.getData("id"))}),location.reload())}catch(t){console.log(t)}},ye=async e=>{try{await v.delete(`${g}/${e}`),location.reload()}catch(t){console.log(t)}},Ce=e=>(le("data-v-91a9aed7"),e=e(),ie(),e),xe={key:0,class:"min-h-screen overflow-x-hidden"},we={class:"text-center text-3xl mt-2"},be={class:"mx-2"},ke={class:"flex items-center mt-3 justify-between"},Ue=Ce(()=>l("img",{src:ce},null,-1)),Me=[Ue],Ie={key:0,class:"fixed top-0 left-0 bg-[#00000079] w-full h-screen z-10 ng:hidden wrapper"},fe={key:0},De={class:"bg-blue-500 p-5 rounded-md flex justify-between items-center mt-2"},Se={class:"flex w-20 justify-between"},Te=["title","onClick"],Ne=["title","onClick"],Ae={key:1,class:"mt-6"},Ve=O({__name:"Chats",setup(e){const{t}=q({useScope:"global"}),c=G();c.getUserData(),J(()=>{window.addEventListener("resize",()=>{window.innerWidth>=1400&&(h.value=!1)})});const a=u(""),i=u(""),h=u(!1),y=u(!1),S=u(null),T=u(null),{toogle:C}=k(h,S),{toogle:N}=k(y,T),{openModal:A,closeModal:V,isOpenModal:$}=P(),{enterChat:j,closeChat:z,showChats:E,uuid:L,room:R}=W(),B=u([{title:"createChat",onClick:A}]);return($e,d)=>{var x,w,b;return s(E)===!0?(r(),m("div",xe,[l("h1",we,U(s(t)("chatsList")),1),l("div",be,[l("div",ke,[l("div",{onClick:d[0]||(d[0]=(...n)=>s(C)&&s(C)(...n)),class:"mr-auto rounded-full p-1 active:bg-[#3090df] ease-in duration-100 block ng:hidden"},Me),p(K,{name:"aside"},{default:M(()=>[h.value?(r(),m("div",Ie,[p(se,{class:"aside"})])):oe("",!0)]),_:1}),p(I,{class:"p-3 mr-1",bg:"#0054A8",value:i.value,"onUpdate:value":d[1]||(d[1]=n=>i.value=n)},null,8,["value"]),p(Q,{onToogleMenu:s(N),"is-open-menu":y.value,menu:B.value},null,8,["onToogleMenu","is-open-menu","menu"]),p(X,{onSubmitModal:d[3]||(d[3]=n=>s(ve)(a.value)),onCloseModal:s(V),"is-open-modal":s($),title:s(t)("fillField"),"title-success-button":s(t)("create")},{default:M(()=>[p(I,{class:"p-3",value:a.value,"onUpdate:value":d[2]||(d[2]=n=>a.value=n),placeholder:s(t)("chatName")},null,8,["value","placeholder"])]),_:1},8,["onCloseModal","is-open-modal","title","title-success-button"])]),(b=(w=(x=s(c))==null?void 0:x.user)==null?void 0:w.chats)!=null&&b.length?(r(),m("div",fe,[(r(!0),m(Y,null,Z(s(ae)(s(c).user.chats,i.value),n=>(r(),m("ul",{class:"mt-4",key:n.id},[l("li",De,[ne(U(n.roomName)+" ",1),l("div",Se,[l("img",{title:s(t)("goChat"),onClick:F=>s(j)(n.uuid,n.roomName),src:ue},null,8,Te),l("img",{title:s(t)("delete"),onClick:F=>s(ye)(n.id),src:re},null,8,Ne)])])]))),128))])):(r(),m("div",Ae,"Чатов пока нет."))])])):(r(),ee(te,{key:1,onCloseChat:s(z),uuid:s(L),name:s(R)},null,8,["onCloseChat","uuid","name"]))}}});const ze=de(Ve,[["__scopeId","data-v-91a9aed7"]]);export{ze as default};
