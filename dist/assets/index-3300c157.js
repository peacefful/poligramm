import{_ as w,o as c,n as v,m as n,d as k,c as T,t as d,l as a,Q as B,k as m,w as I,q as b,P as M,p as g,u as N,e as r,r as R,R as _,b as C,j as V}from"./index-48391db5.js";import{M as E}from"./MainLayout-a2af3593.js";const S={},j={width:"15",height:"15",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function L(l,e){return c(),v("svg",j,e[0]||(e[0]=[n("path",{id:"Vector",d:"M21 1L1 21M1 1L21 21",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const U=w(S,[["render",L]]),q={key:0,class:"notification"},D={class:"notification__wrapper"},K=k({__name:"Notification",props:{chatTitle:{},isInviteRoom:{type:Boolean}},emits:["enterChat","closeNotification"],setup(l){const{t:e}=T({useScope:"global"});return(t,o)=>t.isInviteRoom?(c(),v("div",q,[n("div",D,[n("p",null,d(a(e)("inviteToChat"))+' "'+d(t.chatTitle)+'"',1),n("button",{onClick:o[0]||(o[0]=B(i=>t.$emit("closeNotification"),["prevent"])),class:"notification__close"},[m(U)])]),m(a(M),{class:"mt-5","is-rounded-lg":!0,color:"primary",onClick:o[1]||(o[1]=i=>t.$emit("enterChat"))},{default:I(()=>[b(d(a(e)("signIn")),1)]),_:1})])):g("",!0)}}),O=w(K,[["__scopeId","data-v-f24630d8"]]),P=()=>{const l=N(),e=r(!0),t=r(""),o=r(""),i=r(null);return{showChats:e,uuid:t,room:o,closeChat:()=>e.value=!0,enterChat:(h,f,u,s)=>{e.value=!1,t.value=h,o.value=f,i.value=u,l.push({name:"Chat",params:{chatName:o.value,id:i.value,uuid:t.value}}),s&&s()}}},Q={class:"min-h-screen flex justify-center items-center"},z={key:0,c:""},G=k({__name:"Chats",setup(l){N();const e=r(!1),t=R({title:"",uuid:"",userUuid:!1,roomId:null}),o=()=>e.value=!1;_.emit("personalInvite",C.get("uuid")),_.on("messageInvite",async(u,s,p,y)=>{t.title=s,t.uuid=u,t.roomId=y,t.userUuid=p===C.get("uuid"),t.title&&t.uuid&&t.userUuid&&(e.value=!0,setTimeout(()=>e.value=!1,5e3))});const{enterChat:i,closeChat:$,showChats:x,uuid:h,room:f}=P();return(u,s)=>(c(),V(a(E),null,{default:I(()=>[n("div",Q,[s[1]||(s[1]=n("div",{class:"text-white rounded-md p-1 text-1xl bg-black"},"Выберите чат",-1)),e.value?(c(),v("div",z,[m(a(O),{"is-invite-room":e.value,chatTitle:t.title,onEnterChat:s[0]||(s[0]=p=>a(i)(t.uuid,t.title,t.roomId,o)),onCloseNotification:o},null,8,["is-invite-room","chatTitle"])])):g("",!0)])]),_:1}))}});export{G as default};
